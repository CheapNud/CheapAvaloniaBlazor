<!-- build/CheapAvaloniaBlazor.targets -->
<Project>
  <Target Name="CheapAvaloniaBlazorCheck" BeforeTargets="Build">
    <Message Text="CheapAvaloniaBlazor: Configuring Blazor desktop application..." Importance="high" />
  </Target>

  <!-- Only create wwwroot if it doesn't exist, no copying -->
  <Target Name="EnsureWwwrootExists" BeforeTargets="Build" Condition="!Exists('$(MSBuildProjectDirectory)\wwwroot')">
    <PropertyGroup>
      <WwwRootPath>$(MSBuildProjectDirectory)\wwwroot</WwwRootPath>
    </PropertyGroup>

    <MakeDir Directories="$(WwwRootPath)" />

    <!-- Create minimal favicon to prevent 404s -->
    <WriteLinesToFile
      File="$(WwwRootPath)\favicon.ico"
      Lines=""
      Overwrite="false" />

    <Message Text="CheapAvaloniaBlazor: Created minimal wwwroot folder" Importance="normal" />
  </Target>

  <!-- Import Razor SDK targets if not already imported -->
  <Import Project="$(MSBuildExtensionsPath)\Microsoft\Microsoft.NET.Sdk.Razor\build\netstandard2.0\Microsoft.NET.Sdk.Razor.targets"
          Condition="'$(UsingMicrosoftNETSdkRazor)' != 'true' and Exists('$(MSBuildExtensionsPath)\Microsoft\Microsoft.NET.Sdk.Razor\build\netstandard2.0\Microsoft.NET.Sdk.Razor.targets')" />
</Project>